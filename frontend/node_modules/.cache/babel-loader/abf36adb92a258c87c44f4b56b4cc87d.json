{"ast":null,"code":"import _toConsumableArray from\"/Users/shravanmeena/Desktop/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/shravanmeena/Desktop/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/shravanmeena/Desktop/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/shravanmeena/Desktop/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/shravanmeena/Desktop/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{addToCart,removeCartItem}from\"../actions/cartActions\";import{connect}from\"react-redux\";import{Row,Col,Container,ListGroup,Form,Image,Button,Card}from\"react-bootstrap\";import Message from\"../component/Message\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=/*#__PURE__*/function(_Component){_inherits(Cart,_Component);var _super=_createSuper(Cart);function Cart(){var _this;_classCallCheck(this,Cart);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.removeFromCartHandler=function(id){_this.props.dispatch(removeCartItem(id));};_this.checkoutHandler=function(){if(!_this.props.getUserLoginData.userInfo){return _this.props.history.push(\"/login\");}else{return _this.props.history.push(\"/shipping\");}};return _this;}_createClass(Cart,[{key:\"componentDidMount\",value:// constructor(){\n//   super()\n// }\nfunction componentDidMount(){var productId=this.props.match.params.id;var qty=this.props.location.search?Number(this.props.location.search.split(\"=\")[1]):1;if(productId){this.props.dispatch(addToCart(productId,qty));}}},{key:\"render\",value:function render(){var _this2=this;var cartItems=this.props.getcartData.cartItems;return/*#__PURE__*/_jsx(Container,{className:\"py-4\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shopping cart\"}),cartItems.length===0?/*#__PURE__*/_jsx(Message,{message:\"Your cart is empty\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return _this2.props.dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return _this2.removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h5\",{children:[\"Subtotal\",\" \",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\" items $\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"d-block w-100\",disabled:cartItems.length===0,onClick:function onClick(){return _this2.checkoutHandler();},children:\"Proceed to checkout\"})})]})})})]})});}}]);return Cart;}(Component);var mapStateToProps=function mapStateToProps(state){return{getcartData:state.cart,getUserLoginData:state.userLogin};};export default connect(mapStateToProps)(Cart);","map":{"version":3,"sources":["/Users/shravanmeena/Desktop/ecommerce/frontend/src/screens/Cart.js"],"names":["React","Component","addToCart","removeCartItem","connect","Row","Col","Container","ListGroup","Form","Image","Button","Card","Message","Link","Cart","removeFromCartHandler","id","props","dispatch","checkoutHandler","getUserLoginData","userInfo","history","push","productId","match","params","qty","location","search","Number","split","cartItems","getcartData","length","map","item","image","name","product","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed","mapStateToProps","state","cart","userLogin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { addToCart, removeCartItem } from \"../actions/cartActions\";\nimport { connect } from \"react-redux\";\nimport {\n  Row,\n  Col,\n  Container,\n  ListGroup,\n  Form,\n  Image,\n  Button,\n  Card,\n} from \"react-bootstrap\";\nimport Message from \"../component/Message\";\nimport { Link } from \"react-router-dom\";\n\nclass Cart extends Component {\n  // constructor(){\n  //   super()\n\n  // }\n  componentDidMount() {\n    const productId = this.props.match.params.id;\n    const qty = this.props.location.search\n      ? Number(this.props.location.search.split(\"=\")[1])\n      : 1;\n\n    if (productId) {\n      this.props.dispatch(addToCart(productId, qty));\n    }\n  }\n\n  removeFromCartHandler = (id) => {\n    this.props.dispatch(removeCartItem(id));\n  };\n\n  checkoutHandler = () => {\n    if (!this.props.getUserLoginData.userInfo) {\n      return this.props.history.push(\"/login\");\n    } else {\n      return this.props.history.push(\"/shipping\");\n    }\n  };\n  render() {\n    const { cartItems } = this.props.getcartData;\n    return (\n      <Container className='py-4'>\n        <Row>\n          <Col md={8}>\n            <h3>Shopping cart</h3>\n            {cartItems.length === 0 ? (\n              <Message message={`Your cart is empty`} />\n            ) : (\n              <ListGroup variant='flush'>\n                {cartItems.map((item) => {\n                  return (\n                    <ListGroup.Item key={item.product}>\n                      <Row>\n                        <Col md={2}>\n                          <Image\n                            src={item.image}\n                            alt={item.name}\n                            fluid\n                            rounded\n                          />\n                        </Col>\n                        <Col md={3}>\n                          <Link to={`/product/${item.product}`}>\n                            {item.name}\n                          </Link>\n                        </Col>\n                        <Col md={2}>${item.price}</Col>\n\n                        <Col md={2}>\n                          <Form.Control\n                            as='select'\n                            value={item.qty}\n                            onChange={(e) =>\n                              this.props.dispatch(\n                                addToCart(item.product, Number(e.target.value))\n                              )\n                            }>\n                            {[...Array(item.countInStock).keys()].map((x) => (\n                              <option key={x + 1} value={x + 1}>\n                                {x + 1}\n                              </option>\n                            ))}\n                          </Form.Control>\n                        </Col>\n\n                        <Col md={2}>\n                          <Button\n                            type='button'\n                            variant='light'\n                            onClick={() =>\n                              this.removeFromCartHandler(item.product)\n                            }>\n                            <i className='fas fa-trash'></i>\n                          </Button>\n                        </Col>\n                      </Row>\n                    </ListGroup.Item>\n                  );\n                })}\n              </ListGroup>\n            )}\n          </Col>\n          <Col md={4}>\n            <Card>\n              <ListGroup>\n                <ListGroup.Item>\n                  <h5>\n                    Subtotal{\" \"}\n                    {cartItems.reduce((acc, item) => acc + item.qty, 0)} items $\n                    {cartItems\n                      .reduce((acc, item) => acc + item.qty * item.price, 0)\n                      .toFixed(2)}\n                  </h5>\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <Button\n                    type='button'\n                    className='d-block w-100'\n                    disabled={cartItems.length === 0}\n                    onClick={() => this.checkoutHandler()}>\n                    Proceed to checkout\n                  </Button>\n                </ListGroup.Item>\n              </ListGroup>\n            </Card>\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    getcartData: state.cart,\n    getUserLoginData: state.userLogin,\n  };\n};\n\nexport default connect(mapStateToProps)(Cart);\n"]},"metadata":{},"sourceType":"module"}