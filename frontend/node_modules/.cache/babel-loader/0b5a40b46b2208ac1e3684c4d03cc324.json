{"ast":null,"code":"import _classCallCheck from\"/Users/shravanmeena/Desktop/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/shravanmeena/Desktop/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/shravanmeena/Desktop/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/shravanmeena/Desktop/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Form,Button,Row,Col,Container,Table}from\"react-bootstrap\";import{Link,Redirect}from\"react-router-dom\";import{LinkContainer}from\"react-router-bootstrap\";import{updateUserProfile}from\"../actions/userActions.js\";import{connect}from\"react-redux\";import Loader from\"../component/Loader\";import axios from\"axios\";import Message from\"../component/Message\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProfileScreen=/*#__PURE__*/function(_Component){_inherits(ProfileScreen,_Component);var _super=_createSuper(ProfileScreen);function ProfileScreen(){var _this;_classCallCheck(this,ProfileScreen);_this=_super.call(this);_this.submitHandler=function(e){e.preventDefault();_this.props.dispatch(updateUserProfile({// id: this.props.getLoginInfoData.userInfo.id,\nname:_this.state.name,email:_this.state.email,password:_this.state.password}));};_this.state={name:\"\",email:\"\",password:\"\",confirm_password:\"\",loading:true,myOrders:[]};return _this;}_createClass(ProfileScreen,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=this.props.getLoginInfoData.userInfo.token;var config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}};axios.get(\"/api/users/profile\",config).then(function(response){_this2.setState({name:response.data.name,email:response.data.email,loading:false});}).catch(function(error){console.log(error);});axios.get(\"/api/orders/myorders\",config).then(function(response){_this2.setState({myOrders:response.data});}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this3=this;if(!this.props.getLoginInfoData.userInfo){return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}var _this$state=this.state,name=_this$state.name,email=_this$state.email,password=_this$state.password;return/*#__PURE__*/_jsx(Container,{className:\"py-4\",children:!this.state.loading?/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"User Profile\"}),/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter your name\",value:name,onChange:function onChange(e){return _this3.setState({name:e.target.value});}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return _this3.setState({email:e.target.value});}}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",value:password,onChange:function onChange(e){return _this3.setState({password:e.target.value});}})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"w-100\",onClick:this.submitHandler,children:\"Update profile\"})]})]}),/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"My Orders\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PAID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DELIVERED\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.myOrders?/*#__PURE__*/_jsx(_Fragment,{children:this.state.myOrders.reverse().map(function(order,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:order._id}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",order.totalPrice]}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?order.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{style:{color:\"red\"},className:\"fa fa-times\"})}),/*#__PURE__*/_jsx(\"td\",{children:order.isDelivered?order.deliveredAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{style:{color:\"red\"},className:\"fa fa-times\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",children:\"Details\"})})})]});})}):/*#__PURE__*/_jsx(\"h4\",{children:\"No order yet\"})})]})]})]}):/*#__PURE__*/_jsx(Loader,{})});}}]);return ProfileScreen;}(Component);var mapStateToProps=function mapStateToProps(state){return{getLoginInfoData:state.userLogin,getUserDetailsData:state.userDetails};};export default connect(mapStateToProps)(ProfileScreen);","map":{"version":3,"sources":["/Users/shravanmeena/Desktop/ecommerce/frontend/src/screens/ProfileScreen.js"],"names":["React","Component","Form","Button","Row","Col","Container","Table","Link","Redirect","LinkContainer","updateUserProfile","connect","Loader","axios","Message","ProfileScreen","submitHandler","e","preventDefault","props","dispatch","name","state","email","password","confirm_password","loading","myOrders","token","getLoginInfoData","userInfo","config","headers","Authorization","get","then","response","setState","data","catch","error","console","log","target","value","reverse","map","order","index","_id","totalPrice","isPaid","paidAt","substring","color","isDelivered","deliveredAt","mapStateToProps","userLogin","getUserDetailsData","userDetails"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Button, Row, Col, Container, Table } from \"react-bootstrap\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { updateUserProfile } from \"../actions/userActions.js\";\nimport { connect } from \"react-redux\";\nimport Loader from \"../component/Loader\";\nimport axios from \"axios\";\nimport Message from \"../component/Message\";\n\nclass ProfileScreen extends Component {\n  constructor() {\n    super();\n    this.state = {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      confirm_password: \"\",\n      loading: true,\n      myOrders: [],\n    };\n  }\n  componentDidMount() {\n    const token = this.props.getLoginInfoData.userInfo.token;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    };\n\n    axios\n      .get(\"/api/users/profile\", config)\n      .then((response) => {\n        this.setState({\n          name: response.data.name,\n          email: response.data.email,\n          loading: false,\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n\n    axios\n      .get(\"/api/orders/myorders\", config)\n      .then((response) => {\n        this.setState({\n          myOrders: response.data,\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  submitHandler = (e) => {\n    e.preventDefault();\n    this.props.dispatch(\n      updateUserProfile({\n        // id: this.props.getLoginInfoData.userInfo.id,\n        name: this.state.name,\n        email: this.state.email,\n        password: this.state.password,\n      })\n    );\n  };\n\n  render() {\n    if (!this.props.getLoginInfoData.userInfo) {\n      return <Redirect to='/login' />;\n    }\n    const { name, email, password } = this.state;\n\n    return (\n      <Container className='py-4'>\n        {!this.state.loading ? (\n          <Row>\n            <Col md={4}>\n              <h3>User Profile</h3>\n              <Form>\n                <Form.Group controlId='formBasicEmail'>\n                  <Form.Label>Name</Form.Label>\n                  <Form.Control\n                    type='text'\n                    placeholder='Enter your name'\n                    value={name}\n                    onChange={(e) => this.setState({ name: e.target.value })}\n                  />\n                </Form.Group>\n\n                <Form.Group controlId='formBasicEmail'>\n                  <Form.Label>Email address</Form.Label>\n                  <Form.Control\n                    type='email'\n                    placeholder='Enter email'\n                    value={email}\n                    onChange={(e) => this.setState({ email: e.target.value })}\n                  />\n                  <Form.Text className='text-muted'>\n                    We'll never share your email with anyone else.\n                  </Form.Text>\n                </Form.Group>\n\n                <Form.Group controlId='formBasicPassword'>\n                  <Form.Label>Password</Form.Label>\n                  <Form.Control\n                    type='password'\n                    placeholder='Password'\n                    value={password}\n                    onChange={(e) =>\n                      this.setState({ password: e.target.value })\n                    }\n                  />\n                </Form.Group>\n\n                <Button\n                  variant='primary'\n                  type='submit'\n                  className='w-100'\n                  onClick={this.submitHandler}>\n                  Update profile\n                </Button>\n              </Form>\n            </Col>\n            <Col md={8}>\n              <h4>My Orders</h4>\n\n              <Table striped bordered hover responsive className='table-sm'>\n                <thead>\n                  <tr>\n                    <th>ID</th>\n                    <th>TOTAL</th>\n                    <th>PAID</th>\n                    <th>DELIVERED</th>\n                    <th></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {this.state.myOrders ? (\n                    <>\n                      {this.state.myOrders.reverse().map((order, index) => {\n                        return (\n                          <tr>\n                            <th scope='row'>{order._id}</th>\n                            <td>${order.totalPrice}</td>\n                            <td>\n                              {order.isPaid ? (\n                                order.paidAt.substring(0, 10)\n                              ) : (\n                                <i\n                                  style={{ color: \"red\" }}\n                                  className='fa fa-times'></i>\n                              )}\n                            </td>\n                            <td>\n                              {order.isDelivered ? (\n                                order.deliveredAt.substring(0, 10)\n                              ) : (\n                                <i\n                                  style={{ color: \"red\" }}\n                                  className='fa fa-times'></i>\n                              )}\n                            </td>\n\n                            <td>\n                              <LinkContainer to={`order/${order._id}`}>\n                                <Button variant='light'>Details</Button>\n                              </LinkContainer>\n                            </td>\n                          </tr>\n                        );\n                      })}\n                    </>\n                  ) : (\n                    <h4>No order yet</h4>\n                  )}\n                </tbody>\n              </Table>\n            </Col>\n          </Row>\n        ) : (\n          <Loader />\n        )}\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    getLoginInfoData: state.userLogin,\n    getUserDetailsData: state.userDetails,\n  };\n};\n\nexport default connect(mapStateToProps)(ProfileScreen);\n"]},"metadata":{},"sourceType":"module"}