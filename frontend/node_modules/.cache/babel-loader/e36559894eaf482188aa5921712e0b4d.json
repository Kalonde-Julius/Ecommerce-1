{"ast":null,"code":"var _jsxFileName = \"/Users/shravanmeena/Desktop/ecommerce/frontend/src/screens/PlaceOrder.js\";\nimport React, { Component } from \"react\";\nimport { createOrder } from \"../actions/orderActions\";\nimport { connect } from \"react-redux\";\nimport CheckoutSteps from \"../component/CheckoutSteps\";\nimport { Col, Container, ListGroup, Row, Image, Card, Button } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Loader from \"../component/Loader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PlaceOrder extends Component {\n  constructor() {\n    super();\n\n    this.placeOrderHandler = () => {\n      const cart = this.props.getCartData;\n      const {\n        taxPrice,\n        shippingPrice,\n        totalPrice,\n        itemsPrice\n      } = this.state;\n      const token = this.props.getLoginInfoData.userInfo.token;\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      };\n      axios.post(`http://localhost:5000/api/orders`, {\n        orderItems: cart.cartItems,\n        shippingAddress: cart.shippingAddress,\n        paymentMethod: cart.paymentAddress.paymentMethod,\n        taxPrice,\n        shippingPrice,\n        totalPrice,\n        itemsPrice\n      }, config).then(response => {\n        localStorage.removeItem(\"cartItems\", []);\n        this.props.history.push(`/order/${response.data._id}`);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.addDecimals = num => {\n      return (Math.round(num * 100) / 100).toFixed(2);\n    };\n\n    this.state = {\n      taxPrice: \"\",\n      shippingPrice: \"\",\n      totalPrice: \"\",\n      itemsPrice: \"\"\n    };\n  }\n\n  componentDidMount() {\n    const cart = this.props.getCartData;\n    const itemsPrice = cart.cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2);\n    const shippingPrice = itemsPrice > 100 ? 0 : 100;\n    const taxPrice = this.addDecimals(Number((0.05 * itemsPrice).toFixed(2)));\n    const totalPrice = (Number(itemsPrice) + Number(shippingPrice) + Number(taxPrice)).toFixed(2);\n    this.setState({\n      taxPrice,\n      shippingPrice,\n      totalPrice,\n      itemsPrice\n    });\n  }\n\n  render() {\n    const cart = this.props.getCartData;\n    const {\n      itemsPrice,\n      shippingPrice,\n      taxPrice,\n      totalPrice\n    } = this.state;\n\n    if (!cart.cartItems) {\n      return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-5\",\n      children: [/*#__PURE__*/_jsxDEV(CheckoutSteps, {\n        step1: true,\n        step2: true,\n        step3: true,\n        step4: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          ms: 8,\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            variant: \"flush\",\n            children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Shipping:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [cart.shippingAddress.address, \", \", cart.shippingAddress.city, \",\", \" \", cart.shippingAddress.postalCode, \",\", \" \", cart.shippingAddress.country]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Payment:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Method: \", cart.paymentAddress.paymentMethod]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Order Items:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 17\n              }, this), cart.cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Cart is empty\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(ListGroup, {\n                variant: \"flush\",\n                children: cart.cartItems.map((item, index) => {\n                  return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                    children: /*#__PURE__*/_jsxDEV(Row, {\n                      children: [/*#__PURE__*/_jsxDEV(Col, {\n                        md: 1,\n                        children: /*#__PURE__*/_jsxDEV(Image, {\n                          src: item.image,\n                          alt: item.name,\n                          fluid: true,\n                          rounded: true\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 128,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 127,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(Col, {\n                        children: /*#__PURE__*/_jsxDEV(Link, {\n                          to: `/product/${item.product}`,\n                          children: item.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 136,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 135,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(Col, {\n                        md: 4,\n                        children: [item.qty, \" x $\", item.price, \" = $\", item.qty * item.price]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 141,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 27\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(ListGroup, {\n              variant: \"flush\",\n              children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Order Summary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                variant: \"flush\",\n                children: [/*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"Items\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: [\"$\", itemsPrice]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"Shipping\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: [\"$\", shippingPrice]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"Tax\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: [\"$\", taxPrice]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: [\"$\", totalPrice]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"button\",\n                  className: \"btn-block\",\n                  disabled: cart.cartItems.length === 0,\n                  onClick: () => this.placeOrderHandler(),\n                  children: \"Place Order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    getLoginInfoData: state.userLogin,\n    getCartData: state.cart,\n    getOrderData: state.createOrder\n  };\n};\n\nexport default connect(mapStateToProps)(PlaceOrder);","map":{"version":3,"sources":["/Users/shravanmeena/Desktop/ecommerce/frontend/src/screens/PlaceOrder.js"],"names":["React","Component","createOrder","connect","CheckoutSteps","Col","Container","ListGroup","Row","Image","Card","Button","Link","axios","Loader","PlaceOrder","constructor","placeOrderHandler","cart","props","getCartData","taxPrice","shippingPrice","totalPrice","itemsPrice","state","token","getLoginInfoData","userInfo","config","headers","Authorization","post","orderItems","cartItems","shippingAddress","paymentMethod","paymentAddress","then","response","localStorage","removeItem","history","push","data","_id","catch","error","console","log","addDecimals","num","Math","round","toFixed","componentDidMount","reduce","acc","item","qty","price","Number","setState","render","address","city","postalCode","country","length","map","index","image","name","product","mapStateToProps","userLogin","getOrderData"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,SACEC,GADF,EAEEC,SAFF,EAGEC,SAHF,EAIEC,GAJF,EAKEC,KALF,EAMEC,IANF,EAOEC,MAPF,QAQO,iBARP;AASA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;;;AAEA,MAAMC,UAAN,SAAyBd,SAAzB,CAAmC;AACjCe,EAAAA,WAAW,GAAG;AACZ;;AADY,SASdC,iBATc,GASM,MAAM;AACxB,YAAMC,IAAI,GAAG,KAAKC,KAAL,CAAWC,WAAxB;AACA,YAAM;AAAEC,QAAAA,QAAF;AAAYC,QAAAA,aAAZ;AAA2BC,QAAAA,UAA3B;AAAuCC,QAAAA;AAAvC,UAAsD,KAAKC,KAAjE;AAEA,YAAMC,KAAK,GAAG,KAAKP,KAAL,CAAWQ,gBAAX,CAA4BC,QAA5B,CAAqCF,KAAnD;AACA,YAAMG,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,aAAa,EAAG,UAASL,KAAM;AAFxB;AADI,OAAf;AAMAb,MAAAA,KAAK,CACFmB,IADH,CAEK,kCAFL,EAGI;AACEC,QAAAA,UAAU,EAAEf,IAAI,CAACgB,SADnB;AAEEC,QAAAA,eAAe,EAAEjB,IAAI,CAACiB,eAFxB;AAGEC,QAAAA,aAAa,EAAElB,IAAI,CAACmB,cAAL,CAAoBD,aAHrC;AAIEf,QAAAA,QAJF;AAKEC,QAAAA,aALF;AAMEC,QAAAA,UANF;AAOEC,QAAAA;AAPF,OAHJ,EAYIK,MAZJ,EAcGS,IAdH,CAcSC,QAAD,IAAc;AAClBC,QAAAA,YAAY,CAACC,UAAb,CAAwB,WAAxB,EAAqC,EAArC;AAEA,aAAKtB,KAAL,CAAWuB,OAAX,CAAmBC,IAAnB,CAAyB,UAASJ,QAAQ,CAACK,IAAT,CAAcC,GAAI,EAApD;AACD,OAlBH,EAmBGC,KAnBH,CAmBUC,KAAD,IAAW;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,OArBH;AAsBD,KA1Ca;;AAAA,SAkEdG,WAlEc,GAkECC,GAAD,IAAS;AACrB,aAAO,CAACC,IAAI,CAACC,KAAL,CAAWF,GAAG,GAAG,GAAjB,IAAwB,GAAzB,EAA8BG,OAA9B,CAAsC,CAAtC,CAAP;AACD,KApEa;;AAEZ,SAAK7B,KAAL,GAAa;AACXJ,MAAAA,QAAQ,EAAE,EADC;AAEXC,MAAAA,aAAa,EAAE,EAFJ;AAGXC,MAAAA,UAAU,EAAE,EAHD;AAIXC,MAAAA,UAAU,EAAE;AAJD,KAAb;AAMD;;AAoCD+B,EAAAA,iBAAiB,GAAG;AAClB,UAAMrC,IAAI,GAAG,KAAKC,KAAL,CAAWC,WAAxB;AACA,UAAMI,UAAU,GAAGN,IAAI,CAACgB,SAAL,CAChBsB,MADgB,CACT,CAACC,GAAD,EAAMC,IAAN,KAAeD,GAAG,GAAGC,IAAI,CAACC,GAAL,GAAWD,IAAI,CAACE,KAD5B,EACmC,CADnC,EAEhBN,OAFgB,CAER,CAFQ,CAAnB;AAIA,UAAMhC,aAAa,GAAGE,UAAU,GAAG,GAAb,GAAmB,CAAnB,GAAuB,GAA7C;AACA,UAAMH,QAAQ,GAAG,KAAK6B,WAAL,CAAiBW,MAAM,CAAC,CAAC,OAAOrC,UAAR,EAAoB8B,OAApB,CAA4B,CAA5B,CAAD,CAAvB,CAAjB;AACA,UAAM/B,UAAU,GAAG,CACjBsC,MAAM,CAACrC,UAAD,CAAN,GACAqC,MAAM,CAACvC,aAAD,CADN,GAEAuC,MAAM,CAACxC,QAAD,CAHW,EAIjBiC,OAJiB,CAIT,CAJS,CAAnB;AAMA,SAAKQ,QAAL,CAAc;AACZzC,MAAAA,QADY;AAEZC,MAAAA,aAFY;AAGZC,MAAAA,UAHY;AAIZC,MAAAA;AAJY,KAAd;AAMD;;AAMDuC,EAAAA,MAAM,GAAG;AACP,UAAM7C,IAAI,GAAG,KAAKC,KAAL,CAAWC,WAAxB;AAEA,UAAM;AAAEI,MAAAA,UAAF;AAAcF,MAAAA,aAAd;AAA6BD,MAAAA,QAA7B;AAAuCE,MAAAA;AAAvC,QAAsD,KAAKE,KAAjE;;AACA,QAAI,CAACP,IAAI,CAACgB,SAAV,EAAqB;AACnB,0BAAO,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AAED,wBACE,QAAC,SAAD;AAAW,MAAA,SAAS,EAAC,MAArB;AAAA,8BACE,QAAC,aAAD;AAAe,QAAA,KAAK,MAApB;AAAqB,QAAA,KAAK,MAA1B;AAA2B,QAAA,KAAK,MAAhC;AAAiC,QAAA,KAAK;AAAtC;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,GAAD;AAAA,gCACE,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE,CAAT;AAAA,iCACE,QAAC,SAAD;AAAW,YAAA,OAAO,EAAC,OAAnB;AAAA,oCACE,QAAC,SAAD,CAAW,IAAX;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA,2BACGhB,IAAI,CAACiB,eAAL,CAAqB6B,OADxB,QACmC9C,IAAI,CAACiB,eAAL,CAAqB8B,IADxD,OAC+D,GAD/D,EAEG/C,IAAI,CAACiB,eAAL,CAAqB+B,UAFxB,OAEqC,GAFrC,EAGGhD,IAAI,CAACiB,eAAL,CAAqBgC,OAHxB;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAUE,QAAC,SAAD,CAAW,IAAX;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA,uCAAYjD,IAAI,CAACmB,cAAL,CAAoBD,aAAhC;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVF,eAeE,QAAC,SAAD,CAAW,IAAX;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEGlB,IAAI,CAACgB,SAAL,CAAekC,MAAf,KAA0B,CAA1B,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADD,gBAGC,QAAC,SAAD;AAAW,gBAAA,OAAO,EAAC,OAAnB;AAAA,0BACGlD,IAAI,CAACgB,SAAL,CAAemC,GAAf,CAAmB,CAACX,IAAD,EAAOY,KAAP,KAAiB;AACnC,sCACE,QAAC,SAAD,CAAW,IAAX;AAAA,2CACE,QAAC,GAAD;AAAA,8CACE,QAAC,GAAD;AAAK,wBAAA,EAAE,EAAE,CAAT;AAAA,+CACE,QAAC,KAAD;AACE,0BAAA,GAAG,EAAEZ,IAAI,CAACa,KADZ;AAEE,0BAAA,GAAG,EAAEb,IAAI,CAACc,IAFZ;AAGE,0BAAA,KAAK,MAHP;AAIE,0BAAA,OAAO;AAJT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,8BADF,eASE,QAAC,GAAD;AAAA,+CACE,QAAC,IAAD;AAAM,0BAAA,EAAE,EAAG,YAAWd,IAAI,CAACe,OAAQ,EAAnC;AAAA,oCACGf,IAAI,CAACc;AADR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,8BATF,eAeE,QAAC,GAAD;AAAK,wBAAA,EAAE,EAAE,CAAT;AAAA,mCACGd,IAAI,CAACC,GADR,UACiBD,IAAI,CAACE,KADtB,UAEGF,IAAI,CAACC,GAAL,GAAWD,IAAI,CAACE,KAFnB;AAAA;AAAA;AAAA;AAAA;AAAA,8BAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,qBAAqBU,KAArB;AAAA;AAAA;AAAA;AAAA,0BADF;AAwBD,iBAzBA;AADH;AAAA;AAAA;AAAA;AAAA,sBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAuDE,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE,CAAT;AAAA,iCACE,QAAC,IAAD;AAAA,mCACE,QAAC,SAAD;AAAW,cAAA,OAAO,EAAC,OAAnB;AAAA,sCACE,QAAC,SAAD,CAAW,IAAX;AAAA,uCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAKE,QAAC,SAAD,CAAW,IAAX;AAAgB,gBAAA,OAAO,EAAC,OAAxB;AAAA,wCACE,QAAC,GAAD;AAAA,0CACE,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE,QAAC,GAAD;AAAA,oCAAO9C,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAME,QAAC,GAAD;AAAA,0CACE,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE,QAAC,GAAD;AAAA,oCAAOF,aAAP;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBANF,eAWE,QAAC,GAAD;AAAA,0CACE,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE,QAAC,GAAD;AAAA,oCAAOD,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAXF,eAeE,QAAC,GAAD;AAAA,0CACE,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE,QAAC,GAAD;AAAA,oCAAOE,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAfF;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF,eA0BE,QAAC,SAAD,CAAW,IAAX;AAAA,uCACE,QAAC,MAAD;AACE,kBAAA,IAAI,EAAC,QADP;AAEE,kBAAA,SAAS,EAAC,WAFZ;AAGE,kBAAA,QAAQ,EAAEL,IAAI,CAACgB,SAAL,CAAekC,MAAf,KAA0B,CAHtC;AAIE,kBAAA,OAAO,EAAE,MAAM,KAAKnD,iBAAL,EAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBA1BF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAvDF;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAqGD;;AApLgC;;AAuLnC,MAAMyD,eAAe,GAAIjD,KAAD,IAAW;AACjC,SAAO;AACLE,IAAAA,gBAAgB,EAAEF,KAAK,CAACkD,SADnB;AAELvD,IAAAA,WAAW,EAAEK,KAAK,CAACP,IAFd;AAGL0D,IAAAA,YAAY,EAAEnD,KAAK,CAACvB;AAHf,GAAP;AAKD,CAND;;AAQA,eAAeC,OAAO,CAACuE,eAAD,CAAP,CAAyB3D,UAAzB,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { createOrder } from \"../actions/orderActions\";\nimport { connect } from \"react-redux\";\nimport CheckoutSteps from \"../component/CheckoutSteps\";\nimport {\n  Col,\n  Container,\n  ListGroup,\n  Row,\n  Image,\n  Card,\n  Button,\n} from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Loader from \"../component/Loader\";\n\nclass PlaceOrder extends Component {\n  constructor() {\n    super();\n    this.state = {\n      taxPrice: \"\",\n      shippingPrice: \"\",\n      totalPrice: \"\",\n      itemsPrice: \"\",\n    };\n  }\n  placeOrderHandler = () => {\n    const cart = this.props.getCartData;\n    const { taxPrice, shippingPrice, totalPrice, itemsPrice } = this.state;\n\n    const token = this.props.getLoginInfoData.userInfo.token;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    };\n    axios\n      .post(\n        `http://localhost:5000/api/orders`,\n        {\n          orderItems: cart.cartItems,\n          shippingAddress: cart.shippingAddress,\n          paymentMethod: cart.paymentAddress.paymentMethod,\n          taxPrice,\n          shippingPrice,\n          totalPrice,\n          itemsPrice,\n        },\n        config\n      )\n      .then((response) => {\n        localStorage.removeItem(\"cartItems\", []);\n\n        this.props.history.push(`/order/${response.data._id}`);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  componentDidMount() {\n    const cart = this.props.getCartData;\n    const itemsPrice = cart.cartItems\n      .reduce((acc, item) => acc + item.qty * item.price, 0)\n      .toFixed(2);\n\n    const shippingPrice = itemsPrice > 100 ? 0 : 100;\n    const taxPrice = this.addDecimals(Number((0.05 * itemsPrice).toFixed(2)));\n    const totalPrice = (\n      Number(itemsPrice) +\n      Number(shippingPrice) +\n      Number(taxPrice)\n    ).toFixed(2);\n\n    this.setState({\n      taxPrice,\n      shippingPrice,\n      totalPrice,\n      itemsPrice,\n    });\n  }\n\n  addDecimals = (num) => {\n    return (Math.round(num * 100) / 100).toFixed(2);\n  };\n\n  render() {\n    const cart = this.props.getCartData;\n\n    const { itemsPrice, shippingPrice, taxPrice, totalPrice } = this.state;\n    if (!cart.cartItems) {\n      return <Loader />;\n    }\n\n    return (\n      <Container className='py-5'>\n        <CheckoutSteps step1 step2 step3 step4 />\n        <Row>\n          <Col ms={8}>\n            <ListGroup variant='flush'>\n              <ListGroup.Item>\n                <h4>Shipping:</h4>\n                <p>\n                  {cart.shippingAddress.address}, {cart.shippingAddress.city},{\" \"}\n                  {cart.shippingAddress.postalCode},{\" \"}\n                  {cart.shippingAddress.country}\n                </p>\n              </ListGroup.Item>\n\n              <ListGroup.Item>\n                <h4>Payment:</h4>\n                <p>Method: {cart.paymentAddress.paymentMethod}</p>\n              </ListGroup.Item>\n\n              <ListGroup.Item>\n                <h4>Order Items:</h4>\n                {cart.cartItems.length === 0 ? (\n                  <p>Cart is empty</p>\n                ) : (\n                  <ListGroup variant='flush'>\n                    {cart.cartItems.map((item, index) => {\n                      return (\n                        <ListGroup.Item key={index}>\n                          <Row>\n                            <Col md={1}>\n                              <Image\n                                src={item.image}\n                                alt={item.name}\n                                fluid\n                                rounded\n                              />\n                            </Col>\n                            <Col>\n                              <Link to={`/product/${item.product}`}>\n                                {item.name}\n                              </Link>\n                            </Col>\n\n                            <Col md={4}>\n                              {item.qty} x ${item.price} = $\n                              {item.qty * item.price}\n                            </Col>\n                          </Row>\n                        </ListGroup.Item>\n                      );\n                    })}\n                  </ListGroup>\n                )}\n              </ListGroup.Item>\n            </ListGroup>\n          </Col>\n\n          <Col md={4}>\n            <Card>\n              <ListGroup variant='flush'>\n                <ListGroup.Item>\n                  <h4>Order Summary</h4>\n                </ListGroup.Item>\n\n                <ListGroup.Item variant='flush'>\n                  <Row>\n                    <Col>Items</Col>\n                    <Col>${itemsPrice}</Col>\n                  </Row>\n\n                  <Row>\n                    <Col>Shipping</Col>\n                    <Col>${shippingPrice}</Col>\n                  </Row>\n\n                  <Row>\n                    <Col>Tax</Col>\n                    <Col>${taxPrice}</Col>\n                  </Row>\n                  <Row>\n                    <Col>Total</Col>\n                    <Col>${totalPrice}</Col>\n                  </Row>\n                </ListGroup.Item>\n\n                <ListGroup.Item>\n                  <Button\n                    type='button'\n                    className='btn-block'\n                    disabled={cart.cartItems.length === 0}\n                    onClick={() => this.placeOrderHandler()}>\n                    Place Order\n                  </Button>\n                </ListGroup.Item>\n              </ListGroup>\n            </Card>\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    getLoginInfoData: state.userLogin,\n    getCartData: state.cart,\n    getOrderData: state.createOrder,\n  };\n};\n\nexport default connect(mapStateToProps)(PlaceOrder);\n"]},"metadata":{},"sourceType":"module"}